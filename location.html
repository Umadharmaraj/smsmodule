<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">

	<title>Cotton Sandhai - Trade Details</title>
	  <!--link rel="stylesheet" href="vendor/responsive/css/responsive.bootstrap.min.css" type="text/css" /-->
    <link rel="stylesheet" href="../static/vendor/buttons/css/buttons.bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href= "../static/vendor/datatable/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="../static/vendor/buttons/css/buttons.bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../static/css/style.css"/>
    <link href="multiselect.css" rel="stylesheet">

    <link rel="stylesheet" href="../static/vendor/bootstrap-3.4.1-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-multiselect.css" type="text/css" />
    <script src="https://davidstutz.de/bootstrap-multiselect/dist/js/bootstrap-multiselect.js"></script>
    <link href="https://davidstutz.de/bootstrap-multiselect/docs/css/bootstrap-3.3.2.min.css" rel="stylesheet"/>
    <link href="https://davidstutz.de/bootstrap-multiselect/dist/css/bootstrap-multiselect.css" rel="stylesheet"/>
    <script src="https://davidstutz.de/bootstrap-multiselect/docs/js/bootstrap-3.3.2.min.js"></script>

    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.js"></script>
    <script src="../static/js/jquery-3.3.1.min.js"></script>
    <script src="../static/vendor/bootstrap-3.4.1-dist/js/bootstrap.min.js"></script>     <script src="js/jquery-3.3.1.min.js"></script>
    <script src="../static/vendor/datatable/js/jquery.dataTables.min.js"></script>
    <script src="../static/vendor/datatable/js/dataTables.bootstrap.min.js"></script>
    <!--script src="vendor/responsive/js/responsive.bootstrap.min.js"></!--script-->
    <script src="../static/vendor/buttons/js/dataTables.buttons.min.js"></script>
    <script src="../static/vendor/buttons/js/buttons.bootstrap.min.js"></script>
    <script src="../static/vendor/buttons/js/buttons.html5.min.js"></script>
    <script src="../static/js/jquery.steps.js"></script>
    <script src="../static/js/main.js"></script>



<style>

 .tabcontainer{
  display:flex;
  box-shadow: 0px 0px 10px rgba(0,0,0,.4);
  background-color:rgb(243, 243, 243) ;
  padding-bottom:20px;
  padding-top:20px;
  margin-left:280px;
  margin-top:60px;
  margin-right:20px;
  max-width:100%;
}

#test{
  width:220px;
}
.MultiCheckBox {
            border:1px solid #e2e2e2;
            padding: 5px;
            border-radius:4px;
            cursor:pointer;
        }

        .MultiCheckBox .k-icon{
            font-size: 15px;
            float: right;
            font-weight: bolder;
            margin-top: -7px;
            height: 10px;
            width: 14px;
            color:#787878;
        }

        .MultiCheckBoxDetail {
            display:none;
            position:absolute;
            border:1px solid #e2e2e2;
            overflow-y:hidden;
        }

        .MultiCheckBoxDetailBody {
            overflow-y:scroll;
        }

            .MultiCheckBoxDetail .cont  {
                clear:both;
                overflow: hidden;
                padding: 2px;
            }

            .MultiCheckBoxDetail .cont:hover  {
                background-color:#cfcfcf;
            }

            .MultiCheckBoxDetailBody > div > div {
                float:left;
            }

        .MultiCheckBoxDetail>div>div:nth-child(1) {

        }

        .MultiCheckBoxDetailHeader {
            overflow:hidden;
            position:relative;
            height: 28px;
            background-color:#3d3d3d;
        }

            .MultiCheckBoxDetailHeader>input {
                position: absolute;
                top: 4px;
                left: 3px;
            }

            .MultiCheckBoxDetailHeader>div {
                position: absolute;
                top: 5px;
                left: 24px;
                color:#fff;
            }

div.relative {
  position: relative;
  left: 350px;

}
div.relate {
     position: relative;
     left: 300px;
}
div .box {
      display:inline-block;
      padding:15px;


}


#map {

    height: 450px;
    width: 450px;
    margin-left: 250px;
    margin-top:0px;
  }

.inner .form-row .form-holder .form-holder-2 {
	width: 100%;
	position: relative;
	margin-left: 0px;
}

#location-error {
    display: inline-block;
    padding: 6px;
    background: #e4a7a7;
    border: #d49c9c 1px solid;
    font-size: 1.3em;
    color: #333;
    display:none;
    //margin: 12px;
  }


</style>
</head>

<body style="background-color:white">

<!---Top menu-->
<div id="wrapper" class="wrapper">
	<!---Top menu-->
	<div class="top_navbar">
	  <div class="openbtn" onclick="openNav()">
		 <div class="one"></div>
		 <div class="two"></div>
		 <div class="three"></div>
	  </div>
	  <div class="top_menu">
		<div class="logo"><img src="../static/images/logo3.jpg"/><br></div>
		<ul>
		<div class="dropdown">
		  <li class="dropbtn" ><a href="#">
			<i class="glyphicon glyphicon-user"></i>
			</a>
		  </li>
		  <div class="dropdown-content">
				<a href="accountprofile.html">Account Info</a>
				<a href="#">Payment Info</a>
				<a href="#">Forgot Password</a>
		  </div>
		</div>
		<li><a href="#">
			<i data-toggle="tooltip" data-placement="right" title="Notifications" class="glyphicon glyphicon-bell"></i>
			</a>
          </li>
          <li><a href="{% url 'user_logout' %}">
			<i  data-toggle="tooltip" data-placement="right" title="Logout" class="glyphicon glyphicon-arrow-right"></i>
			</a>
		  </li>
		</ul>
	  </div>
	</div>

    <!-- Sidebar -->
    <div id="mySidepanel" class="sidepanel">
	  <ul class="sidebar-nav" id="">
		<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>

		<li><a href="traders.html" >Traders</a></li>
        <li><a href="{% url 'vendors' %}">Vendors</a></li>
	  </ul>
	</div>
 <!-- Add Button -->

  <!-- Sidebar -->

  <div id="mySidepanel" class="sidepanel">
     <ul class="sidebar-nav" id="">
       <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>

        <li><a href="traders.html">Trades</a></li>
        <li><a href="{% url 'vendors' %}">Vendors</a></li>
     </ul>
  </div>
  <br>
  <div id="test">
  </div>
  <!---MAIN CONTAINER-->

  <div class="container tabcontainer">
      <div class="form-row">

    <!--<div class="topnav">-->
    <!-- <div class="search-container">

          <div class="pac-card" id="pac-card">
         <div id="pac-container">-->



       <!--<label for="name" class="paddma1" style="font-weight:300;width:160px !important;background-color:#fff;box-shadow:0 2px 6px rgba(0, 0, 0, 0.3);">Location Search  </label>-->
        <!--<div id="label" style="width:250px">
         Location search
        </div>-->
       <!-- <input type="text" placeholder="Enter a location.." id="loc-input" name="search" style="margin-left: 250px; margin-top:100px; margin-botton: 0px"><div id="location-error"></div>-->
      <!--<button type="submit"><i class="fa fa-search"></i></button>-->
    <!--</div><br><br><br>-->




    <div class="inner">
          <div class="clearfix"></div>
          <br><br><br><br>





    <div class="form-holder form-holder-2">
        <div class="form-group has-feedback">
       <!--<input type="text" placeholder="Enter a location.." id="inputSuccess2" class="form-control" name="search" style="margin-left: 250px; margin-botton: 0px; width:450px; margin-right: 0px; border-radius:0px; padding-bottom:0px">-->
        <input type="search" id="loc-input" placeholder="   Enter a location.." results style="margin-left: 250px; margin-botton: 0px; width:450px; margin-right: 0px; border-radius:0px; padding-bottom:0px; border: none; height: 30px;">
            <!--<span class="glyphicon glyphicon-search form-control-feedback" style="display: inline-block;"></span></div>--></div>
        <div id="location-error"></div>


      <div id="map"></div>
    <div id="infowindow-content">
      <!--<img src="" width="450px" height="450px" id="place-icon" style="margin-left:0px;">-->
      <span id="place-name"  class="title"></span><br>
      <span id="place-address"></span>



    </div><br>

<div class="inner" style="margin-bottom:10px; margin-left:0px">
      <div class="clearfix"></div>

              <div class="container input-group-sm mb-2 "style="margin-left:0px">
                 <div class="box">
               <div class="relate">
                <label for="framework" style="margin-left:-10px; width: 450px;font-size: 16px; font-weight: 500; color: rgb(20, 20, 20);">Whom do you want to send the location to?


                </label><br>
               </div>

                 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
                <div class="relative">
                <select  multiple="multiple" class="multiselect" id="vendorselect" style="margin-left: 350px; margin-botton: 0px; height: 75px; width:200px; margin-right: 0px; border-radius:0px; padding-bottom:0px; border: none;">
                  <option value="Broker">Maa Ginning</option>
                  <option value="Seller">Manoharlal Rameshchandra</option>
                  <option value="Trader1">Tirupati Ginning</option>
                  <option  value="Trader2">Prince Ginning</option>
                 </select>
                 </div>

             </div>
            </br>
</div>
</div>
<table class="datatable table table-hover display" id="example">

      <thead>
        <tr>
          <th data-orderable="true">Vendor Name</th>
          <th data-orderable="true">Primary Name</th>
          <th data-orderable="true">Primary No</th>
          <th data-orderable="true">Secondary Name</th>
          <th data-orderable="true">Secondary No</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
    <tbody class="tbody">
        <tr>

          <td>Maa Ginning</td>
          <td>Raju Bhai </td>
          <td>9876543870</td>
          <td>Deepak Shah</td>
          <td>9456734521</td>

		    </tr>
        <tr>

            <td>Manoharlal Rameshchandra</td>
            <td>Abhishek Dhoot</td>
            <td>8546732456</td>
            <td>Manoharlal</td>
            <td>7658903456</td>

        </tr>

      </tbody>
    </table>
    <!--<div id="location-url">
      <label id="emptylabel" style="color:blue;font-size:20px"><b>Location as URL:</b></label>
      <label id="labelID" style="color:red;font-size:16px"><b></b></label>
    </div>-->
      </div>
</div>


      </div>
</div>

</div>
</div>


 <!-- <div id="pac-container">
        <input id="pac-input" type="text"
        placeholder="Enter a location"><div id="location-error"></div>
  </div>-->


</div>


<!---Delete modal--->
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>


<script>


        $(document).ready(function () {
            $("#vendorselect").CreateMultiCheckBox({ width: '230px', defaultText : 'Select Below', height:'250px'});
        });

        $(document).ready(function () {
            $(document).on("click", ".MultiCheckBox", function () {
                var detail = $(this).next();
                detail.show();
            });

            $(document).on("click", ".MultiCheckBoxDetailHeader input", function (e) {
                e.stopPropagation();
                var hc = $(this).prop("checked");
                $(this).closest(".MultiCheckBoxDetail").find(".MultiCheckBoxDetailBody input").prop("checked", hc);
                $(this).closest(".MultiCheckBoxDetail").next().UpdateSelect();
            });

            $(document).on("click", ".MultiCheckBoxDetailHeader", function (e) {
                var inp = $(this).find("input");
                var chk = inp.prop("checked");
                inp.prop("checked", !chk);
                $(this).closest(".MultiCheckBoxDetail").find(".MultiCheckBoxDetailBody input").prop("checked", !chk);
                $(this).closest(".MultiCheckBoxDetail").next().UpdateSelect();
            });

            $(document).on("click", ".MultiCheckBoxDetail .cont input", function (e) {
                e.stopPropagation();
                $(this).closest(".MultiCheckBoxDetail").next().UpdateSelect();

                var val = ($(".MultiCheckBoxDetailBody input:checked").length == $(".MultiCheckBoxDetailBody input").length)
                $(".MultiCheckBoxDetailHeader input").prop("checked", val);
            });

            $(document).on("click", ".MultiCheckBoxDetail .cont", function (e) {
                var inp = $(this).find("input");
                var chk = inp.prop("checked");
                inp.prop("checked", !chk);

                var multiCheckBoxDetail = $(this).closest(".MultiCheckBoxDetail");
                var multiCheckBoxDetailBody = $(this).closest(".MultiCheckBoxDetailBody");
                multiCheckBoxDetail.next().UpdateSelect();

                var val = ($(".MultiCheckBoxDetailBody input:checked").length == $(".MultiCheckBoxDetailBody input").length)
                $(".MultiCheckBoxDetailHeader input").prop("checked", val);
            });

            $(document).mouseup(function (e) {
                var container = $(".MultiCheckBoxDetail");
                if (!container.is(e.target) && container.has(e.target).length === 0) {
                    container.hide();
                }
            });
        });

        var defaultMultiCheckBoxOption = { width: '220px', defaultText: 'Select Below', height: '200px' };

        jQuery.fn.extend({
            CreateMultiCheckBox: function (options) {

                var localOption = {};
                localOption.width = (options != null && options.width != null && options.width != undefined) ? options.width : defaultMultiCheckBoxOption.width;
                localOption.defaultText = (options != null && options.defaultText != null && options.defaultText != undefined) ? options.defaultText : defaultMultiCheckBoxOption.defaultText;
                localOption.height = (options != null && options.height != null && options.height != undefined) ? options.height : defaultMultiCheckBoxOption.height;

                this.hide();
                this.attr("multiple", "multiple");
                var divSel = $("<div class='MultiCheckBox'>" + localOption.defaultText + "<span class='k-icon k-i-arrow-60-down'><svg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='sort-down' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512' class='svg-inline--fa fa-sort-down fa-w-10 fa-2x'><path fill='currentColor' d='M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z' class=''></path></svg></span></div>").insertBefore(this);
                divSel.css({ "width": localOption.width });

                var detail = $("<div class='MultiCheckBoxDetail'><div class='MultiCheckBoxDetailHeader'><input type='checkbox' class='mulinput' value='-1982' /><div>Select All</div></div><div class='MultiCheckBoxDetailBody'></div></div>").insertAfter(divSel);
                detail.css({ "width": parseInt(options.width) + 10, "max-height": localOption.height });
                var multiCheckBoxDetailBody = detail.find(".MultiCheckBoxDetailBody");

                this.find("option").each(function () {
                    var val = $(this).attr("value");

                    if (val == undefined)
                        val = '';

                    multiCheckBoxDetailBody.append("<div class='cont'><div><input type='checkbox' class='mulinput' value='" + val + "' /></div><div>" + $(this).text() + "</div></div>");
                });

                multiCheckBoxDetailBody.css("max-height", (parseInt($(".MultiCheckBoxDetail").css("max-height")) - 28) + "px");
            },
            UpdateSelect: function () {
                var arr = [];

                this.prev().find(".mulinput:checked").each(function () {
                    arr.push($(this).val());
                });

                this.val(arr);
            },
        });


function initMap() {
    	var centerCoordinates = new google.maps.LatLng(37.6, -95.665);
        var map = new google.maps.Map(document.getElementById('map'), {
        center: centerCoordinates,
        zoom: 4
        });
        var card = document.getElementById('pac-card');
        var input = document.getElementById('loc-input');
        alert(input);
        var infowindowContent = document.getElementById('infowindow-content');

        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(card);

        var autocomplete = new google.maps.places.Autocomplete(input);
        var infowindow = new google.maps.InfoWindow();
        infowindow.setContent(infowindowContent);

        var marker = new google.maps.Marker({
          map: map
        });

        autocomplete.addListener('place_changed', function() {
 	        document.getElementById("location-error").style.display = 'none';
            infowindow.close();
            marker.setVisible(false);
        		var place = autocomplete.getPlace();
        		var locationUrl=place.url
        		console.log(locationUrl)
        		alert(locationUrl);
        		$("#labelID").text(locationUrl);
        		if (!place.geometry) {
        		  	document.getElementById("location-error").style.display = 'inline-block';
        		  	document.getElementById("location-error").innerHTML = "Cannot Locate '" + input.value + "' on map";
        		    return;
        		}

        		map.fitBounds(place.geometry.viewport);
        		marker.setPosition(place.geometry.location);
        		marker.setVisible(true);
        		infowindowContent.children['place-icon'].src = place.icon;
        		infowindowContent.children['place-name'].textContent = place.name;
        		infowindowContent.children['place-address'].textContent = input.value;
        		infowindow.open(map, marker);
        		urlloc = text(locationUrl);
        		alert(urlloc);
                $("#labelID").text(locationUrl);

        });

    }


  //Sidenav
	function openNav() {
  	document.getElementById("mySidepanel").style.width = "200px";
	}

	function closeNav() {
	  document.getElementById("mySidepanel").style.width = "0px";

  }

  //Sidenav
	function openNav() {
  	document.getElementById("mySidepanel").style.width = "200px";
	}
	function closeNav() {
	  document.getElementById("mySidepanel").style.width = "0px";
  }


  function format (d) {
    // `d` is the original data object for the row
    return '<table class="popup" cellpadding="5" cellspacing="" border="0" style="padding-left:50px;paddin-bottom:10px;">'+
        '<tr >'+
            '<td>Full name:</td>'+
            '<td>'+d.name+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Extension number:</td>'+
            '<td>'+d.extn+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Extra info:</td>'+
            '<td>And any further details here (images etc)...</td>'+
        '</tr>'+
        '<tr>'+'</tr>'+
    '</table>'+'<a cellpadding="5" href="reportform.html" style="padding-top:10px" class="viewmore">View More</a>';

}


$(document).ready(function () {
var dataTable = $('#example').DataTable({
  "ordering": true,
  "scrollY":  250,
  "paging": true,
  "scrollX": false,
  "bLengthChange" : false,
  responsive: true,
  scrollX: true,
  scrollCollapse: true,

    buttons: [
       {
        text: '<h4 style="font-size: 16px;font-weight:bold">&nbsp;&nbsp;<i class="fa fa-plus fa-x5" href="traderadd.html"> </i> &nbsp;&nbsp;Add Trade &nbsp;&nbsp;&nbsp;</h4>',
        className: 'btnvendor',
        action: function ( e, dt, button, config ) {
        action='POST'
        window.location = 'traderadd';
        }

      },
    ],


    "dom": '<"pull-left"f><"pull-right"l>tpi',
    "columns": [
    { 'orderable': false,"width": "3%" },
    { "width": "10%" },
    { "width": "20%" },
    { "width": "20%" },
    { "width": "20%" },
    { "width": "20%" },
    { 'orderable': false,"width": "3%" },
    { 'orderable': false,"width": "3%" }
           ],

    //"oLanguage": { "Search": '<i class="icon-search"></i>' },
    "oLanguage": { "sSearch": '<a class="btn searchBtn" id="searchBtn"  style="float:right;vertical-align:middle"><i class="fa fa-search"></i></a>' ,}
  });

  // ADD Button
  dataTable.buttons().container().appendTo($('#test'));

  $('.dataTables_filter input[type="search"]').css(
   {'width':'450px','margin-bottom':'7px','vertical-align':'baseline'}
   );

  $(".dataTables_wrapper").css("width","100%");

   $('#example tbody').on('click', 'td.details-control', function () {
        var tr = $(this).closest('tr');
        var row = dataTable.row( tr );

        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Open this row
            console.log(row);
            row.child( format(row.data()) ).show();
            tr.addClass('shown');
        }
    } );
} );



</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD9Parc5_Kt9qZxrILD6xg0AFKUoWDFWT4&libraries=places&callback=initMap"
        async defer></script>
</body>

</html>